[{"/Users/zwe/dev/cah-webgame/ts-client/src/index.tsx":"1","/Users/zwe/dev/cah-webgame/ts-client/src/reportWebVitals.ts":"2","/Users/zwe/dev/cah-webgame/ts-client/src/App.tsx":"3","/Users/zwe/dev/cah-webgame/ts-client/src/contexts/SocketContext.ts":"4","/Users/zwe/dev/cah-webgame/ts-client/src/screens/Home.tsx":"5","/Users/zwe/dev/cah-webgame/ts-client/src/screens/Room.tsx":"6","/Users/zwe/dev/cah-webgame/ts-client/src/constants.ts":"7","/Users/zwe/dev/cah-webgame/ts-client/src/hooks/useLocalStorage.ts":"8","/Users/zwe/dev/cah-webgame/ts-client/src/components/Lobby.tsx":"9","/Users/zwe/dev/cah-webgame/ts-client/src/components/Navbar.tsx":"10","/Users/zwe/dev/cah-webgame/ts-client/src/game/ui/GameRoom.tsx":"11","/Users/zwe/dev/cah-webgame/ts-client/src/game/ui/ScoreBoard.tsx":"12","/Users/zwe/dev/cah-webgame/ts-client/src/game/ui/Whitecard.tsx":"13","/Users/zwe/dev/cah-webgame/ts-client/src/game/ui/WinnerCard.tsx":"14","/Users/zwe/dev/cah-webgame/ts-client/src/game/ui/Blackcard.tsx":"15","/Users/zwe/dev/cah-webgame/ts-client/src/utils/index.ts":"16"},{"size":500,"mtime":1620961156998,"results":"17","hashOfConfig":"18"},{"size":425,"mtime":1620961156999,"results":"19","hashOfConfig":"18"},{"size":943,"mtime":1625208374172,"results":"20","hashOfConfig":"18"},{"size":267,"mtime":1620961156995,"results":"21","hashOfConfig":"18"},{"size":2178,"mtime":1625208209457,"results":"22","hashOfConfig":"18"},{"size":3973,"mtime":1625211333171,"results":"23","hashOfConfig":"18"},{"size":270,"mtime":1620961156995,"results":"24","hashOfConfig":"18"},{"size":597,"mtime":1620961156997,"results":"25","hashOfConfig":"18"},{"size":4475,"mtime":1625211572930,"results":"26","hashOfConfig":"18"},{"size":1686,"mtime":1620961156994,"results":"27","hashOfConfig":"18"},{"size":8697,"mtime":1620961156996,"results":"28","hashOfConfig":"18"},{"size":1485,"mtime":1620961156996,"results":"29","hashOfConfig":"18"},{"size":1596,"mtime":1620961156996,"results":"30","hashOfConfig":"18"},{"size":499,"mtime":1620961156996,"results":"31","hashOfConfig":"18"},{"size":423,"mtime":1620961156995,"results":"32","hashOfConfig":"18"},{"size":289,"mtime":1625207351696,"results":"33","hashOfConfig":"18"},{"filePath":"34","messages":"35","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},"ot6ppn",{"filePath":"37","messages":"38","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"39","messages":"40","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"41","messages":"42","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"43","messages":"44","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"45","messages":"46","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"47","messages":"48","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"49","messages":"50","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"51","messages":"52","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"53","messages":"54","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"55","messages":"56","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"57","usedDeprecatedRules":"36"},{"filePath":"58","messages":"59","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"60","messages":"61","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"62","messages":"63","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"64","messages":"65","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"66","messages":"67","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/Users/zwe/dev/cah-webgame/ts-client/src/index.tsx",[],["68","69"],"/Users/zwe/dev/cah-webgame/ts-client/src/reportWebVitals.ts",[],"/Users/zwe/dev/cah-webgame/ts-client/src/App.tsx",[],"/Users/zwe/dev/cah-webgame/ts-client/src/contexts/SocketContext.ts",[],"/Users/zwe/dev/cah-webgame/ts-client/src/screens/Home.tsx",[],"/Users/zwe/dev/cah-webgame/ts-client/src/screens/Room.tsx",["70","71"],"/Users/zwe/dev/cah-webgame/ts-client/src/constants.ts",[],"/Users/zwe/dev/cah-webgame/ts-client/src/hooks/useLocalStorage.ts",[],"/Users/zwe/dev/cah-webgame/ts-client/src/components/Lobby.tsx",[],"/Users/zwe/dev/cah-webgame/ts-client/src/components/Navbar.tsx",[],"/Users/zwe/dev/cah-webgame/ts-client/src/game/ui/GameRoom.tsx",["72"],"import ScoreBoard from \"./ScoreBoard\";\nimport { User, Player, WhiteCard, BlackCard, Setting } from \"../../interfaces\";\nimport { useState, useContext, useEffect } from \"react\";\nimport Whitecard from \"./Whitecard\";\nimport Blackcard from \"./Blackcard\";\nimport WinnerCard from \"./WinnerCard\";\nimport { SocketContext } from \"../../contexts/SocketContext\";\n\ninterface Props {\n  currentUser: User;\n  roomCode: string;\n  setting: Setting;\n  history: any;\n}\n\nexport default function GameRoom(props: Props) {\n  const [players, setPlayers] = useState<Player[]>([]);\n  const [currentPlayer, setCurrentPlayer] = useState<Player>();\n  const [currentBlackCard, setCurrentBlackCard] = useState<BlackCard | null>(\n    null\n  );\n  const [currentWhiteCard, setWhiteCard] = useState<WhiteCard>();\n  const [judgeWhiteCard, setJudgeWhiteCard] = useState<WhiteCard>();\n  const [winnerCard, setWinnerCard] = useState<WhiteCard>();\n  const [winnerPlayer, setWinnerPlayer] = useState<string>();\n  const [playedCards, setPlayedCards] = useState<WhiteCard[]>([]);\n  const [judgeMode, setJudgeMode] = useState(false);\n  const [submitClicked, setSubmitClicked] = useState(false);\n  const [nextClicked, setNextClicked] = useState(false);\n  const [hideNext, setHideNext] = useState(true);\n  const [hideSubmit, setHideSubmit] = useState(false);\n  const [round, setRound] = useState<Number>(1);\n\n  const [gameOver, setGameOver] = useState(false);\n  const socket = useContext(SocketContext);\n\n  useEffect(() => {\n    socket.on(\n      \"game init update\",\n      ({ players, blackCard }: { players: Player[]; blackCard: BlackCard }) => {\n        setPlayers(players);\n        const player = extractCurrentPlayer(players);\n        setCurrentPlayer(player);\n        setCurrentBlackCard(blackCard);\n        setWhiteCard(player?.cards[0]);\n      }\n    );\n\n    socket.on(\n      \"game state update player\",\n      ({\n        players,\n        shuffled,\n      }: {\n        players: Player[];\n        shuffled: WhiteCard[];\n      }) => {\n        setPlayers(players);\n        const player = extractCurrentPlayer(players);\n        setCurrentPlayer(player);\n        setPlayedCards(shuffled);\n        setJudgeMode(true);\n        setSubmitClicked(false);\n        setHideSubmit(true);\n      }\n    );\n    socket.on(\n      \"game state update judge\",\n      ({\n        players,\n        winnerCard,\n      }: {\n        players: Player[];\n        winnerCard: WhiteCard;\n      }) => {\n        setPlayers(players);\n        const player = extractCurrentPlayer(players);\n        setCurrentPlayer(player);\n        setWinnerCard(winnerCard);\n        setWinnerPlayer(extractPlayerById(winnerCard.cardOwner));\n        setJudgeMode(false);\n        setSubmitClicked(false);\n        setHideNext(false);\n      }\n    );\n\n    socket.on(\n        \"players update\",\n        ({\n          players,\n        }: {\n          players: Player[];\n        }) => {\n          setPlayers(players);\n          const player = extractCurrentPlayer(players);\n          setCurrentPlayer(player);\n        }\n      );\n\n    socket.on(\n      \"next turn client\",\n      ({\n        players,\n        blackCard,\n        round,\n      }: {\n        players: Player[];\n        blackCard: BlackCard;\n        round: Number;\n      }) => {\n        setPlayers(players);\n        const player = extractCurrentPlayer(players);\n        setCurrentPlayer(player);\n        setCurrentBlackCard(blackCard);\n        setPlayedCards([]);\n        setWhiteCard(undefined);\n        setWinnerCard(undefined);\n        setWinnerPlayer(undefined);\n        setJudgeWhiteCard(undefined);\n        setJudgeMode(false);\n        setSubmitClicked(false);\n        setNextClicked(false);\n        setHideSubmit(false);\n        setHideNext(true);\n        setRound(round);\n        if(round > props.setting.rounds) setGameOver(true);\n      }\n    );\n  }, [players]);\n\n  const extractCurrentPlayer = (players: Player[]) => {\n    for (let i = 0; i < players.length; i++) {\n      if (players[i].id === props.currentUser?.id) {\n        return players[i];\n      }\n    }\n  };\n\n  const extractPlayerById = (playerId: string | undefined) => {\n    for (let i = 0; i < players.length; i++) {\n      if (players[i].id === playerId) {\n        return players[i].name;\n      }\n    }\n  };\n\n  const handlePlayerSelect = (card: WhiteCard) => {\n    setWhiteCard(card);\n  };\n\n  const handleJudgeSelect = (card: WhiteCard) => {\n    setJudgeWhiteCard(card);\n  };\n\n  const renderWhiteCards = () => {\n    return (\n      <div>\n        {!currentPlayer?.isJudge && !hideSubmit && renderSubmitButton()}\n        <p>Your cards: </p>\n        {currentPlayer &&\n          currentPlayer.cards.map((card: WhiteCard, i: any) => {\n            return (\n              <div key={i}>\n                <Whitecard\n                  type=\"white\"\n                  card={card}\n                  handlePlayerSelect={handlePlayerSelect}\n                  currentWhiteCard={currentWhiteCard}\n                  currentPlayer={currentPlayer}\n                />\n              </div>\n            );\n          })}\n      </div>\n    );\n  };\n\n  const renderCurrentBlackCard = () => {\n    return (\n      <div>\n        <p>Black card: </p>\n        {currentBlackCard && <Blackcard card={currentBlackCard} />}\n        {winnerCard && winnerPlayer && (\n          <WinnerCard card={winnerCard} name={winnerPlayer} />\n        )}\n      </div>\n    );\n  };\n\n  const renderCardsReceived = () => {\n    return (\n      <div>\n        {renderSubmitButton()}\n        <p>Cards received (Judge Mode) : </p>\n        {playedCards.map((card: WhiteCard, i: any) => {\n          return (\n            <div key={i}>\n              <Whitecard\n                type=\"white-judge\"\n                card={card}\n                handleJudgeSelect={handleJudgeSelect}\n                judgeWhiteCard={judgeWhiteCard}\n                currentPlayer={currentPlayer}\n              />\n            </div>\n          );\n        })}\n      </div>\n    );\n  };\n\n  const renderCardsPlayed = () => {\n    return (\n      <div>\n        <p>Cards played : </p>\n        {playedCards.map((card: WhiteCard, i: any) => {\n          return (\n            <div key={i}>\n              <Whitecard card={card} disabled={true} />\n            </div>\n          );\n        })}\n      </div>\n    );\n  };\n\n  const handleSubmit = () => {\n    if (judgeMode) {\n      if (judgeWhiteCard) {\n        socket.emit(\"card select by judge\", {\n          cardId: judgeWhiteCard.id,\n          playerId: currentPlayer?.id,\n          roomCode: props.roomCode,\n        });\n        setSubmitClicked(true);\n      }\n    } else {\n      if (currentWhiteCard && !submitClicked) {\n          socket.emit(\"card select by player\", {\n            cardId: currentWhiteCard.id,\n            playerId: currentPlayer?.id,\n            roomCode: props.roomCode,\n          });\n          setSubmitClicked(true);\n      } \n    }\n  };\n\n  const renderSubmitButton = () => {\n    return (\n      <div>\n        <button\n          className={`${\n            submitClicked ? \"bg-green-500\" : \"bg-red-500\"\n          } hover:bg-green-500 text-white h-10 w-28 `}\n          onClick={handleSubmit}\n        >\n          Submit\n        </button>\n      </div>\n    );\n  };\n\n  const handleNext = () => {\n    setNextClicked(true);\n    socket.emit(\"next turn\", {\n      playerId: currentPlayer?.id,\n      roomCode: props.roomCode,\n    });\n  };\n\n  const renderNextButton = () => {\n    return (\n      <div>\n        <button\n          className={`${\n            nextClicked ? \"bg-green-500\" : \"bg-yellow-500\"\n          } hover:bg-green-500 text-white h-10 w-28 `}\n          onClick={handleNext}\n        >\n          Next\n        </button>\n      </div>\n    );\n  };\n\n  const renderGameOver = () => {\n    return (\n      <div>\n        <p>Game Over</p>\n        <button\n          className=\"bg-blue-500 hover:bg-gray-500 text-white h-10 w-28 \"\n          onClick={() => {\n            socket.emit(\"delete room\", {roomCode: props.roomCode});\n            props.history.push(\"/\");\n          }}\n        >\n          Back to Home\n        </button>\n      </div>\n    );\n  };\n\n  return (\n    <>\n      <p>Game Room</p>\n      <ScoreBoard players={players} gameOver={gameOver}/>\n      {gameOver ? (\n        renderGameOver()\n      ) : (\n        <div>\n          <p className=\"text-2xl\">Round: {round}</p>\n          <div className=\"grid grid-cols-3 gap-10 mt-11\">\n            <div>{currentPlayer && renderWhiteCards()}</div>\n            <div>\n              {!hideNext && renderNextButton()}\n              {renderCurrentBlackCard()}\n              {playedCards && renderCardsPlayed()}\n            </div>\n            <div>\n              {currentPlayer?.isJudge && judgeMode && renderCardsReceived()}\n            </div>\n          </div>\n        </div>\n      )}\n    </>\n  );\n}\n","/Users/zwe/dev/cah-webgame/ts-client/src/game/ui/ScoreBoard.tsx",[],"/Users/zwe/dev/cah-webgame/ts-client/src/game/ui/Whitecard.tsx",[],"/Users/zwe/dev/cah-webgame/ts-client/src/game/ui/WinnerCard.tsx",[],"/Users/zwe/dev/cah-webgame/ts-client/src/game/ui/Blackcard.tsx",[],"/Users/zwe/dev/cah-webgame/ts-client/src/utils/index.ts",[],{"ruleId":"73","replacedBy":"74"},{"ruleId":"75","replacedBy":"76"},{"ruleId":"77","severity":1,"message":"78","line":54,"column":6,"nodeType":"79","endLine":54,"endColumn":8,"suggestions":"80"},{"ruleId":"77","severity":1,"message":"81","line":75,"column":6,"nodeType":"79","endLine":75,"endColumn":21,"suggestions":"82"},{"ruleId":"77","severity":1,"message":"83","line":129,"column":6,"nodeType":"79","endLine":129,"endColumn":15,"suggestions":"84"},"no-native-reassign",["85"],"no-negated-in-lhs",["86"],"react-hooks/exhaustive-deps","React Hook useEffect has missing dependencies: 'currentUser', 'roomCode', and 'socket'. Either include them or remove the dependency array.","ArrayExpression",["87"],"React Hook useEffect has missing dependencies: 'history.location.state.clientId', 'setCurrentUser', 'setHostUser', and 'setUsers'. Either include them or remove the dependency array.",["88"],"React Hook useEffect has missing dependencies: 'extractCurrentPlayer', 'extractPlayerById', 'props.setting.rounds', and 'socket'. Either include them or remove the dependency array.",["89"],"no-global-assign","no-unsafe-negation",{"desc":"90","fix":"91"},{"desc":"92","fix":"93"},{"desc":"94","fix":"95"},"Update the dependencies array to be: [currentUser, roomCode, socket]",{"range":"96","text":"97"},"Update the dependencies array to be: [users, socket, setUsers, setHostUser, history.location.state.clientId, setCurrentUser]",{"range":"98","text":"99"},"Update the dependencies array to be: [extractCurrentPlayer, extractPlayerById, players, props.setting.rounds, socket]",{"range":"100","text":"101"},[1563,1565],"[currentUser, roomCode, socket]",[2185,2200],"[users, socket, setUsers, setHostUser, history.location.state.clientId, setCurrentUser]",[3805,3814],"[extractCurrentPlayer, extractPlayerById, players, props.setting.rounds, socket]"]